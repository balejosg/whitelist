# ==============================================================================
# OpenPath API - Environment Configuration
# ==============================================================================
# Copy this file to .env and fill in the values
# NEVER commit .env to version control!

# ------------------------------------------------------------------------------
# PostgreSQL Database (REQUIRED)
# ------------------------------------------------------------------------------
DB_HOST=localhost
DB_PORT=5432
DB_NAME=openpath
DB_USER=openpath
DB_PASSWORD=openpath_dev

# Connection Pool Settings (Optional)
DB_POOL_MAX=20

# ------------------------------------------------------------------------------
# Server Configuration
# ------------------------------------------------------------------------------
PORT=3000
HOST=0.0.0.0
NODE_ENV=development
# Set to 'production' in production environments

# ------------------------------------------------------------------------------
# Authentication - JWT (REQUIRED in production)
# ------------------------------------------------------------------------------
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# CRITICAL: Server will refuse to start in production without this!
JWT_SECRET=

# Token expiration times
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Legacy admin token (for backwards compatibility)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ADMIN_TOKEN=

# ------------------------------------------------------------------------------
# Google OAuth (Sign In with Google)
# ------------------------------------------------------------------------------
# Create at: https://console.cloud.google.com/apis/credentials
# Create OAuth 2.0 Client ID for Web application
# Add your domain to "Authorized JavaScript origins"
GOOGLE_CLIENT_ID=

# ------------------------------------------------------------------------------
# GitHub Integration (DEPRECATED - for pushing approved domains)
# ------------------------------------------------------------------------------
# Create at: https://github.com/settings/tokens (needs 'repo' scope)
GITHUB_TOKEN=
GITHUB_OWNER=your-org
GITHUB_REPO=your-whitelist-repo
GITHUB_BRANCH=main

# Optional: Default group for new requests
DEFAULT_GROUP=informatica-3

# ------------------------------------------------------------------------------
# Security
# ------------------------------------------------------------------------------
# Shared secret for machine auto-registration
# Must match SHARED_SECRET in firefox-extension/config.js
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
SHARED_SECRET=

# CORS: Allowed origins (comma-separated)
# In production, specify exact origins. NEVER use '*' in production!
# Example: https://your-username.github.io,https://admin.yourschool.edu
CORS_ORIGINS=http://localhost:3000,http://localhost:5500

# Rate limiting (requests per minute per IP)
RATE_LIMIT_MAX=200

# ------------------------------------------------------------------------------
# Push Notifications (Web Push / VAPID)
# ------------------------------------------------------------------------------
# Generate keys with: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_SUBJECT=mailto:admin@school.edu

# ------------------------------------------------------------------------------
# Logging
# ------------------------------------------------------------------------------
# Log level: error, warn, info, debug
LOG_LEVEL=info

# ------------------------------------------------------------------------------
# Optional: Redis (for distributed token blacklist)
# ------------------------------------------------------------------------------
# If not set, uses in-memory store (tokens lost on restart)
# REDIS_URL=redis://localhost:6379
